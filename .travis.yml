language: generic
sudo: required
services:
- docker
before_install:
- set -e
- |
  if [ "$TRAVIS_OS_NAME" == "linux" ]
  then
    rm -rf /home/travis/perl5/ /home/travis/.phpenv /home/travis/gopath /home/travis/otp
    rm -rf /home/travis/.gimme/ /home/travis/.rvm /home/travis/.nvm
  fi
install: scripts/travis-setup.sh
jobs:
  include:
  - stage: Linux+macOS
    if: "(type = push) AND ((branch IN (master, bulk)) OR (fork = true))"
    os: linux
    script: scripts/travis-run.sh
  - stage: Linux
    if: type = pull_request
    os: linux
    script: scripts/travis-run.sh
env:
  global:
  - SUBDAGS=1
  - BIOCONDA_UTILS_TAG=master
  - BIOCONDA_UTILS_BUILD_ARGS="--loglevel=info"
  - BIOCONDA_UTILS_LINT_ARGS=
  - MINICONDA_VER="4.3.21"
  - ANACONDA_USER='nyuad-cgsb'
  - GITHUB_USER='nyuad-cgsb'
  - MY_TRAVIS_REPO_SLUG='biosails/bioconda-recipes'
  - CONTAINER_NAMESPACE='nyuad-cgsb'
  - secure: MrQXrgcsToB1dNSJdbjz6FiRFw2/IKQPaYhC/Wi2zWspk2RCTCy9yDttPXzkCNl+bd5Cf7ltYJBx0FDYT4QceiMMFfMMscrKsBmuUzV7sVPkFODNVgwodXHw4Vrifef3RKdIb6/kGtoaNHi2Gce7fg843yqwheqn9keNgzTC8V+PU4BqRt5ZutVuobea43/sawofNiljIzHSHEfbK/gPaPXGK6EH4yVYu5n6HEfR5LzM8pc4rPSYLWKaSq3xzELdtkitYt+oISataElNcaTWqBWi1jFLd7aBwmwJHOM1ALbwKOw5+HC99LNP5PppCSJu6JWy/1mzZROKWDLfCBF2FlrCW5gR3X7yVBTgMhs6kAJZitKEM0ttvJzWW3ZTIzyvjJCRxFe9L3xHTvWMvOQHpr/HW59klsa25yW9tuWvzykc7aaj10G0CZm4LH76tQS6mwhnQdwbVXXnu6WwZTzbWU2JTCtaUVWtxVIriulwcyL7SeeEOHmg7P1coqaVlm0+tX0+z6uIAEBVXhPf4pJZfgvCM9slxX4Zuz5qQ8i9s93dEgPA2s4QM+6OwE4/S4D3zMfXiJ8dSeWaGu+/8gylmcyiyg60g4+hrm+d1+wJi+NMaVG6/B/eW5JRBVawK4fg0EK3bxiIhxwXrrOQ3QKpctsnag+dlqHoUoDpx0LsAtE=
  - secure: QNP7i9tbzdAhwknyKvO9tY5vfNYf2CG1sKDPHpdhXQzYvVJpkTEP8F8G/57zGeLyxo+3i+CKKSH2NSr2g3IDfxD62kOGswg2BJVxFt+UNgowCIWVjR8Gw7F66NhILNM3Z7jmHC2cTtcHwreQHHYIF1wIkj/nmwE7y4ivxOz2N5V2u06zdcNuW6aWo8w7gVPmSmEK7sNstD7xRnhmTeo+0d+0W4c5D7NSR2TEKmr88nUveszXHeNLFHrkLHSvllzNkuJ2pL9JfHNAvER4/PwwkhNvqdtNuhTUxO1Zl801ClmxaUN8Nd6aEMPx6uLqaSDLHvoXA3wWUD5LDHOv1NQuSvnyuQUnSX7iJPmBENmth7qxepzpJSS7k2iUCLJt9McZuTCsoqlt5KPCR5l4Q2yVw/uhlSmpK1apKyq8oOPuWakanB2+ejj9svnf+2NhRKcmVGnk8lvkKDACK5pjwoacL5pItmjlLRl3qWmKMtBGG+xY7E1uiGA90zRP59H5xE/BPhZ1yz7hXtY3N7jjIkj/oSDwMc2Pe3QiHqXrtlLwFSUECbRuJOTQ4WjHFDSwZca1StCHYgr16JEB7NH5VrAeU0S65FGdKnn0eQn9vIDgv8Up9JK3XfOLw2DZDTWXKqwNjYOr8EAksSwMHC8hJZogUnpBUJRTNRUq3/NmRcSQYfU=
  - secure: PP4shDHyVi/qOrqYABlUnrFGG9C2qTFsmA9ISpmEg4iaCvf6qS3AmCIqj9Pq9pHXCGq2dCuFkI6SLs3B2Mcpxk4n5Dnx1MDGfZpZFr8R7Oee4zrFwpANPUuSEAMV+sD41G3ZCKYY6HwceaJ+zqg0pciegN5ma+Z9rZexh68Aw/gRka46FoNxUov/f5TTqnhIurBacVVabw+X0Nb7CR7rSGy6IRkZdoZOsiBGXiGEnzoLMjshFBOqlUylMXC1VIyc0n4tYl5Uq3uAkON48HiaalQMKmhMCZKn8/Whv4XAfmRejgctlrSNS6JaUgFi3nKpI8oxh2Akm53uRb0GJEAfJa8gA95c83p8plcPueZS/aivC+6f35OJ+ca1dTqFR/19JfxsqftWD7UGF5nTTjOmgg7dq3Xz4lMK25EjBP2CYwiZ9fXZeJluW8x2hhBiRxcliOK+3NRk5re9G4ezoV5+e6jOQjNhkDUfVKTDGdkuAY8T2Y+0ZKEUHSWN5zO5+2WkT4jfLG4N+hA3qU1K/R3DGcP7AOdzdgU2SBjNcDu+//BBpK5QknxaqlQI4hIy2sCilui0R59incSuwqBLugVYrWAmhptrZDWJVgs5UgwDtRbjtcvHk8UhWGKGNhNIt0bORdnb7Yg+OwuQ+0nvNP+icABYTKSbggYtWr5OD8eVKwg=
  matrix:
  - SUBDAG=0
matrix:
  fast_finish: true

language: generic
sudo: required
services:
- docker
before_install:
- set -e
- |
  if [ "$TRAVIS_OS_NAME" == "linux" ]
  then
    rm -rf /home/travis/perl5/ /home/travis/.phpenv /home/travis/gopath /home/travis/otp
    rm -rf /home/travis/.gimme/ /home/travis/.rvm /home/travis/.nvm
  fi
install: scripts/travis-setup.sh
jobs:
  include:
  - stage: Linux+macOS
    if: "(type = push) AND ((branch IN (master, bulk)) OR (fork = true))"
    os: linux
    script: scripts/travis-run.sh
  - os: osx
    if: "(type = push) AND ((branch IN (master, bulk)) OR (fork = true))"
    script: scripts/travis-run.sh
  - stage: Linux
    if: type = pull_request
    os: linux
    script: scripts/travis-run.sh
env:
  global:
  - SUBDAGS=1
  - BIOCONDA_UTILS_TAG=master
  - BIOCONDA_UTILS_BUILD_ARGS="--loglevel=info"
  - BIOCONDA_UTILS_LINT_ARGS=
  - MINICONDA_VER="4.3.21"
  - ANACONDA_USER='nyuad-cgsb'
  - GITHUB_USER='nyuad-cgsb'
  - MY_TRAVIS_REPO_SLUG='biosails/bioconda-recipes'
  - secure: OZ4ZirkMkpeTeZ3Z861FZe2LjKdbVI0VSdtl9zZD1raedl07WHBx8ZF8FtMfbKrefEPo7R1oPWqNHz1byf9zAowNx8yjWT11glees4XZnbzoMftDQephOvbD2qKRpZCiay2fNo1mkox8dg0Hn7EutdNfAnmTpPYoliimyNEmnJFzPlKapyhyWJfJB06Z/uoNIcsMl5D8c1s5TQzP7iUEPxyKoILsjW0WYPA5LvH/gGAH7TIKMXpm5hBjbjA6LilxyBMu0CGGSKSZWpTJnbgcg7m2wtcLUMtdJoVVfCiJucl2KvB8J4dPXao/VbSIQheIec8n8OAOceZ0d02dkDAVzsEt+LzkOF55tMMDEyXPjwuGOGE6SA49LJqrG5XB3x+5/lRfmqnyg4bWc2y/pgMatyU/rqhCKJeOwkEA2NMjYue7em/XnHykxN88s58vit5wOeca6MVWILM3fY/2MdhW49j3mJOWiHKFERgA61xRhivF+xke4sQJb7C8FBqb8/Dx9J39qlf/Ml7/qPOoOhrGJVMD8nNVavBrjKDTjU1MqRj+HarNnyC7zY1s6pWeLrfECfWLDtdVGOiDE4AcGlkN4Lt/dLtJud6qS1hc1yj0M09dmavOg1iSI6HzkmI6QcRjOU64d9avv27orNyh6ds0CsbjRrG4rN4Ur5Sh/A8I7AY=
  matrix:
  - SUBDAG=0
matrix:
  fast_finish: true
